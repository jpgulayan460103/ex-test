(this["webpackJsonpdswd-sap-ui"]=this["webpackJsonpdswd-sap-ui"]||[]).push([[0],{163:function(e,t,a){e.exports=a.p+"static/media/logo.86d1eb32.png"},234:function(e,t,a){e.exports=a(426)},239:function(e,t,a){},420:function(e,t,a){},426:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),s=(a(239),a(35)),o=a(53),i=a(431),u=a(106),m=a(429),d=a(433),p=a(44),f=a(427),g=a(428),E=a(432),b=a(164),h=a.n(b),y=a(108),v=a.n(y),O=a(430),j=a(233),w=(O.a.confirm,localStorage.getItem("token"));v.a.defaults.baseURL="/sap/",v.a.defaults.headers.common.Authorization="Bearer ".concat(w),v.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401==e.response.status?window.location="/sap/pages/login":e.response&&403==e.response.status?j.b.error("Unauthorized Access, Please contact administrator"):e.response&&e.response.status>=500&&j.b.error("Opss! Something went wrong. Please report this to your technical support"),Promise.reject(e)}));var _=v.a,S=a(437),k=i.a.Title,x=i.a.Text,N=u.a.Option,I=function(){Object(n.useEffect)((function(){te(),ae(),re()}),[]);var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)({}),i=Object(s.a)(c,2),b=i[0],y=i[1],v=Object(n.useState)(!1),O=Object(s.a)(v,2),j=O[0],w=O[1],I=Object(n.useState)([]),C=Object(s.a)(I,2),P=(C[0],C[1],Object(n.useState)([])),F=Object(s.a)(P,2),A=F[0],T=F[1],L=Object(n.useState)([]),U=Object(s.a)(L,2),R=U[0],q=U[1],B=Object(n.useState)(0),D=Object(s.a)(B,2),H=D[0],V=D[1],W=Object(n.useState)([]),J=Object(s.a)(W,2),z=J[0],Y=J[1],M=Object(n.useState)([]),$=Object(s.a)(M,2),G=($[0],$[1],Object(n.useState)([])),K=Object(s.a)(G,2),Q=(K[0],K[1],Object(n.useState)([])),X=Object(s.a)(Q,2),Z=X[0],ee=X[1],te=function(){w(!0),_.get("/beneficiaries",{params:b}).then((function(e){w(!1);var t=e.data.data;t.map((function(e){return e.key=e.id,e})),l(t)})).catch((function(e){w(!1),console.log(e)})).then((function(){w(!1)}))},ae=function(){_.get("/beneficiaries/statistics/source",{params:b}).then((function(e){w(!1);var t=e.data.data;t.map((function(e,t){return e.key="source_statistic_".concat(t),e.title="".concat(e.source,": ").concat(e.source_count),e})),T(t),ne(t)})).catch((function(e){console.log(e)})).then((function(){}))},ne=function(e){_.get("/beneficiaries/statistics/category",{params:b}).then((function(t){w(!1);var a=t.data.data;a.map((function(e,t){return e.key="category_statistic_".concat(t),e.title="".concat(e.category,": ").concat(e.category_count),e}));for(var n=function(t){e[t].children=a.filter((function(a){return a.source==e[t].source}))},r=0;r<e.length;r++)n(r);var l=e.reduce((function(e,t){return e+parseInt(t.source_count)}),0);V(l),q(e)})).catch((function(e){console.log(e)})).then((function(){}))},re=function(){_.get("/beneficiaries/barangays",{params:b}).then((function(e){w(!1);var t=e.data.data;t.map((function(e,t){return e.key="barangay_".concat(t),e})),Y(t)})).catch((function(e){console.log(e)})).then((function(){}))},le=a,ce=[{title:"Name",key:"full_name_ln",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(h.a,{highlightStyle:{backgroundColor:"#ffe4bf",padding:0},searchWords:Z,autoEscape:!0,textToHighlight:"".concat(t.lastname?t.lastname:"",", ").concat(t.firstname?t.firstname:""," ").concat(t.midname?t.midname:""," ").concat(t.ext?t.ext:"")}))}},{title:"Birthday",dataIndex:"birthday",key:"birthday"},{title:"Address",dataIndex:"address",key:"address"},{title:"Source",dataIndex:"source",key:"source"},{title:"Category",dataIndex:"category",key:"category"},{title:"Remarks",dataIndex:"remarks",key:"remarks"}];return r.a.createElement("div",null,r.a.createElement(m.a,{name:"normal_login",className:"login-form",layout:"inline",onFinish:te},r.a.createElement(m.a.Item,{name:"username"},r.a.createElement(d.a,{autoComplete:"off",placeholder:"Search",allowClear:!0,onChange:function(e){!function(e){var t=e.target.value;y(Object(o.a)(Object(o.a)({},b),{},{keyword:t})),ee(t.split(",").map((function(e){return e.trim()})))}(e)},style:{width:"250px"}})),r.a.createElement(m.a.Item,{name:"barangay"},r.a.createElement(u.a,{allowClear:!0,mode:"multiple",style:{width:"300px"},placeholder:"Barangay",onChange:function(e){var t=e;y(Object(o.a)(Object(o.a)({},b),{},{barangay:t}))},optionLabelProp:"label"},function(){var e=[];return z.map((function(t){e.push(r.a.createElement(N,{key:t.key,value:t.barangay_name,label:t.barangay_name},t.barangay_name,", ",t.city_name))})),e}())),r.a.createElement(m.a.Item,{name:"source"},r.a.createElement(u.a,{allowClear:!0,style:{width:"120px"},placeholder:"Source",onChange:function(e){var t=e;y(Object(o.a)(Object(o.a)({},b),{},{source:t}))}},function(){var e=[];return A.map((function(t){e.push(r.a.createElement(N,{key:t.key,value:t.source,label:t.source},t.source))})),e}())),r.a.createElement(m.a.Item,null,r.a.createElement(p.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Search"))),0!=Z.length?r.a.createElement(f.a,null,r.a.createElement(x,null,"keywords: "),Z.map((function(e){return r.a.createElement(x,null,'"',r.a.createElement(x,{strong:!0},e),'"')}))):"",r.a.createElement("br",null),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(g.a,{dataSource:le,columns:ce,loading:j,pagination:{position:["topLeft","bottomLeft"]},expandable:{expandedRowRender:function(e){return r.a.createElement("div",null,r.a.createElement("p",{style:{margin:0}},"Source: ",r.a.createElement("b",null,e.source)),r.a.createElement("p",{style:{margin:0}},"Category: ",r.a.createElement("b",null,e.category," ",e.remarks)),r.a.createElement("p",{style:{margin:0}},"Name: ",r.a.createElement("b",null,e.full_name_fn)),r.a.createElement("p",{style:{margin:0}},"Address: ",r.a.createElement("b",null,e.address,", ",e.province_name)),r.a.createElement("p",{style:{margin:0}},"Payment Category: ",r.a.createElement("b",null,e.payment_category)),r.a.createElement("p",{style:{margin:0}},"Payout Branch: ",r.a.createElement("b",null,e.payout_branch)),r.a.createElement("p",{style:{margin:0}},"Payout Partner: ",r.a.createElement("b",null,e.payout_partner)),r.a.createElement("p",{style:{margin:0}},"Cash Out Reference Number:\xa0",r.a.createElement("b",null,r.a.createElement(h.a,{highlightStyle:{backgroundColor:"#ffe4bf",padding:0},searchWords:Z,autoEscape:!0,textToHighlight:"".concat(e.cash_out_ref_number?e.cash_out_ref_number:"")}))),r.a.createElement("p",{style:{margin:0}},"Payout Schedule: ",r.a.createElement("b",null,e.schedule)),r.a.createElement("p",{style:{margin:0}},"Batch and Part: ",r.a.createElement("b",null,e.batch_part)),r.a.createElement("p",{style:{margin:0}},"Starpay Disbursement Status: ",r.a.createElement("b",null,e.starpay_status)))}}})),r.a.createElement(k,{level:3},"Total Records: ",H),r.a.createElement(E.a,{showLine:!0,switcherIcon:r.a.createElement(S.a,null),defaultExpandAll:!0,onSelect:function(e,t){console.log("selected",e,t)},treeData:R}))},C=a(163),P=a.n(C),F=a(438),A=a(439),T={labelCol:{span:5},wrapperCol:{span:17}},L={wrapperCol:{offset:5,span:17}},U=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0];i[1];return r.a.createElement("div",null,r.a.createElement(m.a,Object.assign({},T,{name:"basic",initialValues:{remember:!0},onFinish:function(e){c(!0),_.post("/login",e).then((function(e){c(!1),window.location="/sap/pages/home",localStorage.setItem("token",e.data.token)})).catch((function(e){c(!1),j.b.error(e.response.data.message)})).then((function(e){c(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(m.a.Item,Object.assign({label:"Username",name:"username"},function(){if(u)return{validateStatus:"error",help:u.message}}(),{rules:[{required:!0,message:"Please input your username!"}]}),r.a.createElement(d.a,{prefix:r.a.createElement(F.a,null)})),r.a.createElement(m.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(d.a.Password,{prefix:r.a.createElement(A.a,null)})),r.a.createElement(m.a.Item,L,r.a.createElement(p.a,{type:"primary",htmlType:"submit",disabled:l,loading:l},"Submit"))))},R=a(107),q=(a(393),u.a.Option,{labelCol:{span:6},wrapperCol:{span:18}}),B={wrapperCol:{offset:5,span:17}},D=function(e){var t=e.type,a=r.a.useRef(),l=Object(n.useState)(!1),c=Object(s.a)(l,2),i=c[0],u=c[1],f=Object(n.useState)({}),g=Object(s.a)(f,2),E=g[0],b=g[1],h=Object(n.useState)("create"),y=Object(s.a)(h,2),v=y[0],O=y[1],w=Object(n.useState)(null),S=Object(s.a)(w,2),k=S[0],x=S[1],N=Object(n.useState)(!1),I=Object(s.a)(N,2),C=I[0],P=I[1];Object(n.useEffect)((function(){"update"==t&&_.get("/logged").then((function(e){var t=e.data.data;a.current.setFieldsValue(Object(o.a)({},t)),O("update"),x(t.id)})).catch((function(e){})).then((function(e){}))}),[]);var T=function(e){if(E[e]&&0!=E[e].length)return{validateStatus:"error",help:E[e][0]}};return r.a.createElement("div",null,r.a.createElement(m.a,Object.assign({},q,{ref:a,name:"basic",initialValues:{remember:!0},onFinish:function(e){u(!0),b({}),"update"==v?(e.id=k,_.put("/users/".concat(k),e).then((function(e){u(!1),j.b.success("You have successfully updated your profile."),b({})})).catch((function(e){u(!1),b(e.response.data.errors),j.b.error("Registration Failed.")})).then((function(e){u(!1)}))):_.post("/users",e).then((function(e){u(!1),j.b.success("You are registered, please wait for admin to approve your registration"),a.current.resetFields(),b({})})).catch((function(e){u(!1),b(e.response.data.errors),j.b.error("Registration Failed.")})).then((function(e){u(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(m.a.Item,Object.assign({label:"Username",name:"username"},T("username"),{rules:[{required:!0,message:"Please input your username!"}]}),r.a.createElement(d.a,{prefix:r.a.createElement(F.a,null)})),"update"==t?r.a.createElement(m.a.Item,Object.assign({},B,{name:"change_password",valuePropName:"checked"}),r.a.createElement(R.a,{onChange:function(e){P(e.target.checked)}},"Change Password")):"","create"==v||C?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Item,Object.assign({label:"Password",name:"password"},T("password"),{rules:[{required:!0,message:"Please input your password!"}]}),r.a.createElement(d.a.Password,{prefix:r.a.createElement(A.a,null)})),r.a.createElement(m.a.Item,Object.assign({label:"Confirm Password",name:"password_confirmation"},T("password_confirmation"),{rules:[{required:!0,message:"Please input your password!"}]}),r.a.createElement(d.a.Password,{prefix:r.a.createElement(A.a,null)}))):"",r.a.createElement(m.a.Item,Object.assign({label:"First Name",name:"first_name"},T("first_name"),{rules:[{required:!0,message:"Please input your first name."}]}),r.a.createElement(d.a,null)),r.a.createElement(m.a.Item,Object.assign({label:"Middle Name",name:"middle_name"},T("middle_name")),r.a.createElement(d.a,null)),r.a.createElement(m.a.Item,Object.assign({label:"Last Name",name:"last_name"},T("last_name"),{rules:[{required:!0,message:"Please input your last name."}]}),r.a.createElement(d.a,null)),r.a.createElement(m.a.Item,Object.assign({label:"Department/Unit",name:"department_unit"},T("department_unit"),{rules:[{required:!0,message:"Please input your department/unit."}]}),r.a.createElement(d.a,null)),r.a.createElement(m.a.Item,B,r.a.createElement(p.a,{type:"primary",htmlType:"submit",disabled:i,loading:i},"Submit"))))},H=i.a.Title,V=(i.a.Text,function(e){return r.a.createElement("div",{className:"Login row h-100 p-10"},r.a.createElement("div",{className:"col-6"},r.a.createElement(H,{level:3,style:{textAlign:"center"}},"Login Form"),r.a.createElement(U,null)),r.a.createElement("div",{className:"col-6"},r.a.createElement(H,{level:3,style:{textAlign:"center"}},"Registration Form"),r.a.createElement(D,{type:"create"})))}),W=a(434),J=i.a.Title,z=(i.a.Text,function(e){return r.a.createElement("div",{className:"Layout"},r.a.createElement("div",{className:"main-layout-container"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center align-items-center p-3"},r.a.createElement("img",{className:"h-16",src:P.a,alt:"",style:{width:"100%"}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(J,{level:2,style:{textAlign:"center"}},"Social Amelioration Information System"),r.a.createElement("br",null),e.children)))),r.a.createElement(W.a,null))}),Y=a(435),M=function(e){var t=e.users,a=e.getUserAccess,n=e.changeActiveStatus,l=e.loading,c=e.deleteUser,s=t,o=[{title:"Access",key:"is_active",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(Y.a,{checkedChildren:"On",unCheckedChildren:"Off",defaultChecked:1==t.is_active,onChange:function(e){n(e,t)}}))}},{title:"type",dataIndex:"type",key:"type"},{title:"username",dataIndex:"username",key:"username"},{title:"Fullname",key:"first_name",render:function(e,t){return r.a.createElement("span",null,(t.last_name?t.last_name:"")+", "+(t.first_name?t.first_name:"")+" "+(t.middle_name?t.middle_name:""))}},{title:"Department/Unit",dataIndex:"department_unit",key:"department_unit"},{title:"",key:"logs",align:"center",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{href:"javascript:void(0)",onClick:function(){a(t)}},"View Logs")," | ",r.a.createElement("a",{href:"javascript:void(0)",onClick:function(){c(t)}},"Delete"))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:s,columns:o,style:{width:"100%"},loading:l}))},$=function(e){var t=e.userLogs,a=e.user,n=e.loading,l=t,c=[{title:"user",key:"user",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("span",null,a.username),r.a.createElement("br",null))}},{title:"datetime",dataIndex:"date",key:"date"},{title:"device",key:"user_agent",render:function(e,t){var a=JSON.parse(t.user_agent);return r.a.createElement("span",null,r.a.createElement("span",null,a.platform,", ",a.os),r.a.createElement("br",null))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{dataSource:l,columns:c,style:{width:"100%"},loading:n}))},G=a(440),K=i.a.Title,Q=(i.a.Text,O.a.confirm),X=function(e){Object(n.useEffect)((function(){x()}),[]);var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)({}),f=Object(s.a)(p,2),g=f[0],E=f[1],b=Object(n.useState)(!1),h=Object(s.a)(b,2),y=h[0],v=h[1],O=Object(n.useState)(!1),w=Object(s.a)(O,2),S=w[0],k=w[1],x=function(){v(!0),_.get("/users").then((function(e){v(!1),c(e.data.data)})).catch((function(e){v(!1)})).then((function(e){v(!1)}))};return r.a.createElement("div",{className:"Users row h-100 p-10"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement(K,{level:3,style:{textAlign:"center"}},"Users"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(M,{users:l,getUserAccess:function(e){k(!0),E(e),_.get("/users/access/".concat(e.id)).then((function(e){k(!1),d(e.data.data)})).catch((function(e){k(!1)})).then((function(e){k(!1)}))},changeActiveStatus:function(e,t){var a=Object(o.a)(Object(o.a)({},t),{},{is_active:e?"yes":"no"});_.put("/users/".concat(t.id),a).then((function(e){j.b.success("".concat(t.username," has been updated"))})).catch((function(e){})).then((function(e){}))},loading:y,deleteUser:function(e){Q({title:"Do you want to delete ".concat(e.username,"?"),icon:r.a.createElement(G.a,null),content:"This is a permanent deletion.",onOk:function(){_.delete("/users/".concat(e.id)).then((function(t){j.b.success("".concat(e.username," has been deleted")),x()})).catch((function(e){})).then((function(e){}))},onCancel:function(){}})}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(K,{level:3,style:{textAlign:"center"}},"Access Logs"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement($,{userLogs:m,user:g,loading:S}))))},Z=i.a.Title,ee=(i.a.Text,function(e){return r.a.createElement("div",{className:"Profile row h-100 p-10"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement(Z,{level:3,style:{textAlign:"center"}},"User Profile"),r.a.createElement(D,{type:"update"})))}),te=(a(420),a(421),a(422),a(436)),ae=a(441),ne=a(109),re=a(37),le=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=(a[0],a[1],function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"list-group",style:{width:"120px"}},r.a.createElement(ne.b,{className:"custom-menu",to:"/sap/pages/home"},r.a.createElement("li",{className:"list-group-item custom-menu-item"},"Home")),r.a.createElement(ne.b,{className:"custom-menu",to:"/sap/pages/users"},r.a.createElement("li",{className:"list-group-item custom-menu-item"},"Users")),r.a.createElement(ne.b,{className:"custom-menu",to:"/sap/pages/profile"},r.a.createElement("li",{className:"list-group-item custom-menu-item"},"Profile")),r.a.createElement("a",{className:"custom-menu",href:"/sap/pages/login",onClick:function(){localStorage.removeItem("token")}},r.a.createElement("li",{className:"list-group-item custom-menu-item"},"Logout"))))}),c=function(){return r.a.createElement("div",{className:"container",style:{minHeight:0,padding:"5px",height:"43px"}},r.a.createElement(te.a,{content:r.a.createElement(l,e),title:"",placement:"bottomRight",trigger:"click",className:"float-right"},r.a.createElement(p.a,{type:"default",shape:"circle",icon:r.a.createElement(ae.a,null)})))};return r.a.createElement(ne.a,null,r.a.createElement("div",{className:"App"}),r.a.createElement(re.c,null,r.a.createElement(re.a,{path:"/sap/pages/users"},r.a.createElement(c,null),r.a.createElement(z,null,r.a.createElement(X,null))),r.a.createElement(re.a,{path:"/sap/pages/login"},r.a.createElement(c,null),r.a.createElement(z,null,r.a.createElement(V,null))),r.a.createElement(re.a,{path:"/sap/pages/profile"},r.a.createElement(c,null),r.a.createElement(z,null,r.a.createElement(ee,null))),r.a.createElement(re.a,{path:"/sap/pages/home"},r.a.createElement(c,null),r.a.createElement(z,null,r.a.createElement(I,null))),r.a.createElement(re.a,{path:"/"},r.a.createElement(c,null),r.a.createElement(z,null,r.a.createElement(I,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[234,1,2]]]);
//# sourceMappingURL=main.cbd6ab7a.chunk.js.map